<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ONKOZ ‚Äî Voice & Chat Platform</title>
  <link rel="icon" type="image/png" href="/assets/icon.png" />
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body class="bg-onkoz-bg text-onkoz-text font-sans h-screen overflow-hidden">

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     AUTH SCREEN
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="auth-screen"
     class="fixed inset-0 flex items-center justify-center z-50"
     style="background: radial-gradient(ellipse at 60% 40%, #2d1f4e 0%, #1e1f22 70%)">

  <div class="bg-onkoz-surface border border-onkoz-border rounded-xl p-8 w-[360px] shadow-card flex flex-col gap-4">

    <!-- Logo complet -->
    <div class="flex justify-center mb-1">
      <img src="/assets/logo.png" alt="ONKOZ" class="w-full max-w-[280px] h-auto rounded-lg" />
    </div>

    <!-- Setup admin (1√®re installation) -->
    <div id="setup-form" class="hidden flex-col gap-3">
      <h2 class="text-center font-bold text-lg">Configuration initiale</h2>
      <p class="text-center text-sm text-onkoz-text-md">Aucun administrateur trouv√©. Cr√©ez le compte admin.</p>
      <input id="setup-username" type="text" maxlength="20" placeholder="Pseudo admin"
             class="bg-onkoz-deep border border-onkoz-border rounded-md px-3 py-2.5 text-onkoz-text outline-none focus:border-onkoz-accent transition-colors" />
      <input id="setup-password" type="password" placeholder="Mot de passe"
             class="bg-onkoz-deep border border-onkoz-border rounded-md px-3 py-2.5 text-onkoz-text outline-none focus:border-onkoz-accent transition-colors" />
      <button id="setup-btn"
              class="bg-onkoz-accent hover:bg-onkoz-accent-dk text-white font-semibold py-2.5 rounded-md transition-colors">
        Cr√©er le compte admin
      </button>
    </div>

    <!-- Onglets Connexion / Inscription -->
    <div id="auth-tabs" class="flex rounded-md overflow-hidden bg-onkoz-deep">
      <button class="tab-btn flex-1 py-2 font-medium text-onkoz-text-md hover:bg-onkoz-hover transition-colors active"
              data-tab="login">Connexion</button>
      <button class="tab-btn flex-1 py-2 font-medium text-onkoz-text-md hover:bg-onkoz-hover transition-colors"
              data-tab="register">Inscription</button>
    </div>

    <!-- Connexion -->
    <div id="login-form" class="flex flex-col gap-3">
      <input id="login-username" type="text" maxlength="20" placeholder="Pseudo" autocomplete="username"
             class="bg-onkoz-deep border border-onkoz-border rounded-md px-3 py-2.5 text-onkoz-text outline-none focus:border-onkoz-accent transition-colors" />
      <input id="login-password" type="password" placeholder="Mot de passe" autocomplete="current-password"
             class="bg-onkoz-deep border border-onkoz-border rounded-md px-3 py-2.5 text-onkoz-text outline-none focus:border-onkoz-accent transition-colors" />
      <button id="login-btn"
              class="bg-onkoz-accent hover:bg-onkoz-accent-dk text-white font-semibold py-2.5 rounded-md transition-colors">
        Se connecter
      </button>
    </div>

    <!-- Inscription -->
    <div id="register-form" class="hidden flex-col gap-3">
      <div class="bg-onkoz-user/10 border border-onkoz-user/30 rounded-md px-3 py-2.5 text-onkoz-user text-sm">
        ‚ö†Ô∏è Ton pseudo est <strong>d√©finitif</strong> et ne pourra pas √™tre chang√©.
      </div>
      <input id="reg-username" type="text" maxlength="20" placeholder="Choisis ton pseudo (d√©finitif)" autocomplete="username"
             class="bg-onkoz-deep border border-onkoz-border rounded-md px-3 py-2.5 text-onkoz-text outline-none focus:border-onkoz-accent transition-colors" />
      <input id="reg-password" type="password" placeholder="Mot de passe (min 6 caract√®res)" autocomplete="new-password"
             class="bg-onkoz-deep border border-onkoz-border rounded-md px-3 py-2.5 text-onkoz-text outline-none focus:border-onkoz-accent transition-colors" />
      <button id="register-btn"
              class="bg-onkoz-accent hover:bg-onkoz-accent-dk text-white font-semibold py-2.5 rounded-md transition-colors">
        Cr√©er mon compte
      </button>
    </div>

    <!-- Erreur auth -->
    <div id="auth-error"
         class="hidden bg-onkoz-danger/15 border border-onkoz-danger/40 rounded-md px-3 py-2.5 text-onkoz-danger text-sm text-center">
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     APP PRINCIPALE
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="app" class="hidden grid grid-cols-app h-screen overflow-hidden">

  <!-- ‚îÄ‚îÄ SIDEBAR GAUCHE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <aside class="bg-onkoz-surface border-r border-onkoz-border flex flex-col overflow-hidden">

    <!-- Logo + titre -->
    <div class="flex items-center gap-2.5 px-4 h-12 border-b border-onkoz-border shrink-0">
      <img src="/assets/icon.png" alt="ONKOZ" class="w-7 h-7 object-contain rounded-sm" />
      <span class="font-bold text-onkoz-accent-lt tracking-wide text-[0.95rem]">ONKOZ</span>
    </div>

    <!-- Salons texte -->
    <div class="py-3 border-b border-onkoz-border">
      <div class="flex items-center justify-between px-3 mb-1">
        <span class="text-[0.72rem] font-bold tracking-wider uppercase text-onkoz-text-muted">Salons Texte</span>
        <button id="create-text-channel" title="Cr√©er un salon texte" style="display:none"
                class="w-6 h-6 flex items-center justify-center rounded text-onkoz-text-muted hover:text-onkoz-text hover:bg-onkoz-hover transition-colors text-lg font-light leading-none">
          +
        </button>
      </div>
      <ul id="text-channels" class="overflow-y-auto max-h-40"></ul>
    </div>

    <!-- Salons vocaux -->
    <div class="py-3 border-b border-onkoz-border">
      <div class="flex items-center justify-between px-3 mb-1">
        <span class="text-[0.72rem] font-bold tracking-wider uppercase text-onkoz-text-muted">Salons Vocaux</span>
        <button id="create-voice-channel" title="Cr√©er un salon vocal" style="display:none"
                class="w-6 h-6 flex items-center justify-center rounded text-onkoz-text-muted hover:text-onkoz-text hover:bg-onkoz-hover transition-colors text-lg font-light leading-none">
          +
        </button>
      </div>
      <ul id="voice-channels" class="overflow-y-auto max-h-40"></ul>
    </div>

    <!-- Salons √©ph√©m√®res -->
    <div class="py-3 border-b border-onkoz-border">
      <div class="flex items-center justify-between px-3 mb-1">
        <span class="text-[0.72rem] font-bold tracking-wider uppercase text-onkoz-text-muted">√âph√©m√®res</span>
        <button id="create-ephemeral" title="Cr√©er un salon √©ph√©m√®re"
                class="w-6 h-6 flex items-center justify-center rounded text-onkoz-text-muted hover:text-onkoz-text hover:bg-onkoz-hover transition-colors text-lg font-light leading-none">
          +
        </button>
      </div>
      <ul id="ephemeral-channels" class="overflow-y-auto max-h-40"></ul>
    </div>

    <!-- Footer utilisateur -->
    <div class="mt-auto border-t border-onkoz-border p-2">
      <div class="flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-onkoz-hover transition-colors cursor-default">
        <div id="footer-avatar"
             class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm text-white shrink-0 uppercase">
          ?
        </div>
        <div class="flex-1 min-w-0">
          <span id="footer-username" class="block text-sm font-semibold truncate"></span>
          <span id="footer-role" class="role-badge"></span>
        </div>
        <button id="logout-btn" title="Se d√©connecter"
                class="w-7 h-7 flex items-center justify-center rounded text-onkoz-text-muted hover:bg-onkoz-hover hover:text-onkoz-text transition-colors text-sm">
          ‚èè
        </button>
      </div>
    </div>
  </aside>

  <!-- ‚îÄ‚îÄ ZONE CENTRALE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <main class="flex flex-col overflow-hidden bg-onkoz-bg">

    <!-- Header canal -->
    <div class="flex items-center gap-2 px-4 h-12 border-b border-onkoz-border bg-onkoz-bg shrink-0 z-10">
      <span id="channel-icon" class="text-onkoz-text-muted text-lg">#</span>
      <span id="channel-name" class="font-bold text-[1rem]">S√©lectionne un salon</span>
      <div id="voice-controls" class="hidden items-center gap-2 ml-auto">
        <button id="mute-btn" title="Muet / Non muet"
                class="w-8 h-8 flex items-center justify-center rounded-full text-onkoz-text-muted hover:bg-onkoz-hover hover:text-onkoz-text transition-colors">
          üé§
        </button>
        <button id="leave-voice-btn" title="Quitter le vocal"
                class="w-8 h-8 flex items-center justify-center rounded-full text-onkoz-danger hover:bg-onkoz-danger/20 transition-colors">
          üìû
        </button>
      </div>
    </div>

    <!-- Contenu -->
    <div id="content-area" class="flex-1 overflow-y-auto p-4 flex flex-col gap-px">
      <div class="flex flex-col items-center justify-center flex-1 gap-3 text-onkoz-text-muted">
        <div class="text-6xl">üé§</div>
        <h2 class="text-onkoz-text-md text-xl font-semibold">Bienvenue sur ONKOZ</h2>
        <p class="text-sm">S√©lectionne un salon pour commencer</p>
      </div>
    </div>

    <!-- Input message -->
    <div id="message-input-area" class="px-4 py-3 border-t border-onkoz-border shrink-0" style="display:none">
      <div class="flex items-center gap-2 bg-onkoz-surface border border-onkoz-border rounded-md px-3 py-1.5">
        <input id="message-input" type="text" maxlength="2000" placeholder="Message..."
               class="flex-1 bg-transparent border-none outline-none text-onkoz-text placeholder:text-onkoz-text-muted text-sm" />
        <button id="send-btn"
                class="w-8 h-8 flex items-center justify-center bg-onkoz-accent hover:bg-onkoz-accent-dk text-white rounded-full transition-colors text-base shrink-0">
          ‚Üë
        </button>
      </div>
    </div>
  </main>

  <!-- ‚îÄ‚îÄ SIDEBAR DROITE (membres) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <aside class="bg-onkoz-surface border-l border-onkoz-border overflow-y-auto py-3">
    <div class="text-[0.7rem] font-bold tracking-widest uppercase text-onkoz-text-muted px-4 pb-2 border-b border-onkoz-border mb-2">
      Membres
    </div>
    <div>
      <div class="text-[0.68rem] font-bold tracking-wide uppercase text-onkoz-text-muted px-4 py-2">En ligne</div>
      <ul id="online-users"  class="px-2"></ul>
    </div>
    <div class="mt-2">
      <div class="text-[0.68rem] font-bold tracking-wide uppercase text-onkoz-text-muted px-4 py-2">Hors ligne</div>
      <ul id="offline-users" class="px-2"></ul>
    </div>
  </aside>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     PANEL DM
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="dm-panel"
     class="hidden fixed bottom-4 right-60 w-[340px] h-[440px] bg-onkoz-surface border border-onkoz-border rounded-xl shadow-dm flex flex-col z-50">
  <div class="flex items-center justify-between px-4 py-3 border-b border-onkoz-border text-sm shrink-0">
    <span class="text-onkoz-text-md">Message priv√© avec <strong id="dm-partner-name" class="text-onkoz-text font-semibold"></strong></span>
    <button id="close-dm"
            class="w-7 h-7 flex items-center justify-center rounded text-onkoz-text-muted hover:bg-onkoz-hover hover:text-onkoz-text transition-colors text-sm">‚úï</button>
  </div>
  <div id="dm-messages" class="flex-1 overflow-y-auto p-3 flex flex-col gap-1.5"></div>
  <div class="flex gap-2 p-2.5 border-t border-onkoz-border shrink-0">
    <input id="dm-input" type="text" maxlength="2000" placeholder="Message priv√©..."
           class="flex-1 bg-onkoz-deep border border-onkoz-border rounded-md px-3 py-2 text-onkoz-text text-sm outline-none focus:border-onkoz-accent transition-colors" />
    <button id="dm-send-btn"
            class="w-8 h-8 flex items-center justify-center bg-onkoz-accent hover:bg-onkoz-accent-dk text-white rounded-full transition-colors shrink-0">‚Üë</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MODAL
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="modal-overlay" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-[200]">
  <div class="bg-onkoz-surface border border-onkoz-border rounded-xl p-6 w-80 flex flex-col gap-4 shadow-dm">
    <h3 id="modal-title" class="font-bold text-lg text-onkoz-text"></h3>
    <input id="modal-channel-name" type="text" maxlength="32" placeholder="nom-du-salon"
           class="bg-onkoz-deep border border-onkoz-border rounded-md px-3 py-2.5 text-onkoz-text outline-none focus:border-onkoz-accent transition-colors" />
    <div id="modal-ephemeral-opts" class="hidden">
      <label class="flex items-center gap-2 text-sm text-onkoz-text-md cursor-pointer">
        <input id="eph-with-text" type="checkbox" class="accent-onkoz-accent" />
        Ajouter un salon texte √©ph√©m√®re
      </label>
    </div>
    <div class="flex gap-2 justify-end">
      <button id="modal-cancel"
              class="px-4 py-2 rounded-md border border-onkoz-border text-onkoz-text-md hover:bg-onkoz-hover transition-colors text-sm font-medium">
        Annuler
      </button>
      <button id="modal-confirm"
              class="px-4 py-2 rounded-md bg-onkoz-accent hover:bg-onkoz-accent-dk text-white font-semibold text-sm transition-colors">
        Cr√©er
      </button>
    </div>
  </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mediasoup-client@3/dist/mediasoup-client.min.js"></script>
<script src="/js/api.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/ui.js"></script>
<script src="/js/voice.js"></script>
<script src="/js/chat.js"></script>
<script src="/js/app.js"></script>
</body>
</html>
